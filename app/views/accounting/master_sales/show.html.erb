<%= render partial: 'layouts/notifications' %>

<%= render partial: 'layouts/navigation' %>

<br><br><br>

<p class="basic-title"><%= "#{t('accounting.sale')} - #{@master_sale.month} / #{@master_sale.year}" %></p>

<br>
<div class="row">
  <p class="numbers num-color1"><%= t('labels.month_total') %></p><p class="val num-color1"><%= sales_total(@master_sale.sales) %></p>
</div>

<div class="data">
  <div class="row">
    <p class="numbers1 num-color2"><%= t('labels.m_total') %></p><p class="val1 num-color2"><%= total_income(@master_sale.sales, 'Dinheiro') %></p>
    <p class="numbers1 num-color2"><%= t('labels.average') %></p><p class="val1 num-color2"><%= Money.new(income_average(@master_sale.sales, 'Dinheiro'), 'EUR') %></p>
    <p class="numbers1 num-color2"><%= t('labels.days') %></p><p class="val1 num-color2"><%= total_days(@master_sale.sales, 'Dinheiro') %></p>
  </div>
</div>

<div class="data">
  <div class="row">
    <p class="numbers1 num-color3"><%= t('labels.d_total') %></p><p class="val1 num-color3"><%= total_income(@master_sale.sales, 'Débito') %></p>
    <p class="numbers1 num-color3"><%= t('labels.average') %></p><p class="val1 num-color3"><%= Money.new(income_average(@master_sale.sales, 'Débito'), 'EUR') %></p>
    <p class="numbers1 num-color3"><%= t('labels.days') %></p><p class="val1 num-color3"><%= total_days(@master_sale.sales, 'Débito') %></p>
  </div>
</div>

<div class="data">
  <div class="row">
    <p class="numbers1 num-color4"><%= t('labels.c_total') %></p><p class="val1 num-color4"><%= total_income(@master_sale.sales, 'Crédito') %></p>
    <p class="numbers1 num-color4"><%= t('labels.average') %></p><p class="val1 num-color4"><%= Money.new(income_average(@master_sale.sales, 'Débito'), 'EUR') %></p>
    <p class="numbers1 num-color4"><%= t('labels.days') %></p><p class="val1 num-color4"><%= total_days(@master_sale.sales, 'Crédito') %></p>
  </div>
</div>
<br>

<% chart_group = { Dinheiro: total_income(@master_sale.sales, 'Dinheiro').to_f, Débito: total_income(@master_sale.sales, 'Débito').to_f, Crédito: total_income(@master_sale.sales, 'Crédito').to_f} %>

<%= column_chart chart_group, prefix: "R$", colors: ["#b00", "#666"] %>

<br>

<div class="form-row" style="margin-left: 25px">
  <div class="col-md-1 mb-10">
    <%= link_to t('buttons.back'), accounting_master_sales_path, class:"btn btn-secondary"%>
  </div>
    <%= link_to t('buttons.edit'), edit_accounting_master_sale_path(@master_sale), class:"btn btn-primary butt-align2"%>
</div>

<div class="container-table100">
  <div class="wrap-table100">
    <div class="table100">
      <table>
        <thead>
          <tr class="table100-head">
            <th class="column1"><%= t('labels.date') %></th>
            <th class="column3"><%= t('labels.description') %></th>
            <th class="column6"><%= t('labels.value') %></th>
          </tr>
        </thead>
        <tbody>
          <% @master_sale.sales.each do |sale| %>

            <tr <%= sale_color(sale) %> >
              <td class="column1"><%= l(sale.day) %></td>
              <td class="column3"><%= sale.income_type.name %></td>
              <td class="column6"><%= sale.value %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>


